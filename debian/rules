#!/usr/bin/make -f

export DH_COMPAT=2

build: build-stamp
build-stamp:
	dh_testdir
	./configure --prefix=/usr
	make
	touch build-stamp

clean:
	dh_testdir
	dh_clean
	-rm -f build-stamp
	-make distclean
	-rm -f `find . -name "*~"`
	-rm -rf debian/cutils debian/files* core debian/substvars

binary-indep:	
	
# There are no architecture-independent files to be uploaded
# generated by this package.  If there were any they would be
# made here.

binary-arch:	build
	dh_testdir
	dh_testroot
	dh_clean -k
	dh_installdirs

	$(MAKE) install prefix=`pwd`/debian/cutils/usr
	rm -rf debian/cutils/usr/info
	mv debian/cutils/usr/man debian/cutils/usr/share
	
	dh_installdocs NEWS README CREDITS
	dh_installinfo doc/cutils.info
	dh_undocumented
	dh_installchangelogs 
	dh_strip
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb


binary:		binary-indep binary-arch
.PHONY: binary binary-arch binary-indep clean
